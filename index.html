<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HealthAssist AI | Smart Health Companion</title>
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- CSS VARIABLES --- */
        :root {
            --primary: #0ea5e9;
            --primary-dark: #0284c7;
            --secondary: #10b981; /* Green */
            --bg-body: #f8fafc;
            --bg-card: #ffffff;
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border: #e2e8f0;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
            --radius: 16px;
        }

        [data-theme="dark"] {
            --primary: #38bdf8;
            --primary-dark: #7dd3fc;
            --secondary: #34d399;
            --bg-body: #0f172a;
            --bg-card: #1e293b;
            --text-main: #f1f5f9;
            --text-muted: #94a3b8;
            --border: #334155;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; transition: background-color 0.3s, color 0.3s; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-body); color: var(--text-main); line-height: 1.6; scroll-behavior: smooth; }
        a { text-decoration: none; color: inherit; }
        
        /* --- UTILITIES --- */
        .container { max-width: 1200px; margin: 0 auto; padding: 0 24px; }
        section { padding: 80px 0; border-bottom: 1px solid var(--border); }
        .section-header { text-align: center; margin-bottom: 50px; }
        .section-header h2 { font-size: 2.2rem; font-weight: 700; margin-bottom: 10px; }
        .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius); padding: 30px; box-shadow: var(--shadow); }

        /* --- BUTTONS (MATCHING SCREENSHOT) --- */
        .btn { display: inline-flex; align-items: center; justify-content: center; padding: 14px 28px; border-radius: 50px; font-weight: 600; cursor: pointer; border: none; gap: 8px; transition: transform 0.2s; font-size: 1rem; }
        
        /* Blue Button */
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3); }
        .btn-primary:hover { transform: translateY(-2px); background: var(--primary-dark); }
        
        /* White Button */
        .btn-white { background: white; color: var(--primary); border: 2px solid var(--primary); }
        .btn-white:hover { background: #f0f9ff; transform: translateY(-2px); }

        /* Green Button */
        .btn-green { background: #22c55e; color: white; box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3); }
        .btn-green:hover { background: #16a34a; transform: translateY(-2px); }

        /* --- NAVBAR --- */
        header { position: sticky; top: 0; z-index: 1000; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); border-bottom: 1px solid var(--border); padding: 16px 0; }
        [data-theme="dark"] header { background: rgba(15, 23, 42, 0.9); }
        .nav-inner { display: flex; justify-content: space-between; align-items: center; }
        .logo { font-size: 1.5rem; font-weight: 800; color: var(--text-main); display: flex; align-items: center; gap: 8px; }
        .nav-links { display: flex; gap: 24px; }
        .nav-links a { font-weight: 500; color: var(--text-muted); font-size: 0.95rem; }
        .nav-links a:hover { color: var(--primary); }
        
        /* --- HERO DASHBOARD (MATCHING SCREENSHOT) --- */
        .hero { padding: 100px 0; text-align: center; background: radial-gradient(circle at 50% 0%, rgba(14, 165, 233, 0.08) 0%, transparent 70%); }
        .hero h1 { font-size: 3.5rem; font-weight: 800; margin-bottom: 20px; color: var(--text-main); letter-spacing: -1px; }
        .hero p { max-width: 700px; margin: 0 auto 40px; font-size: 1.15rem; color: var(--text-muted); }
        
        .hero-btns { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-bottom: 50px; }
        
        .hero-stats { display: flex; justify-content: center; gap: 60px; }
        .stat-item { text-align: center; }
        .stat-item strong { display: block; font-size: 2rem; color: var(--primary); font-weight: 700; line-height: 1; }
        .stat-item span { font-size: 0.9rem; color: var(--text-muted); margin-top: 5px; display: block; }

        /* --- FEATURES --- */
        .form-control { width: 100%; padding: 14px; border-radius: 10px; border: 1px solid var(--border); background: var(--bg-body); color: var(--text-main); font-family: inherit; margin-bottom: 15px; outline: none; }
        .form-control:focus { border-color: var(--primary); }
        
        /* Medicine & Doctors Grid */
        .grid-layout { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 25px; }
        
        /* --- FOOTER (NEW) --- */
        footer { background: #1e293b; color: white; padding: 60px 0 30px; margin-top: auto; }
        .footer-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 40px; margin-bottom: 40px; }
        .footer-col h4 { color: white; margin-bottom: 20px; font-size: 1.2rem; }
        .footer-col a { display: block; color: #94a3b8; margin-bottom: 10px; transition: 0.2s; }
        .footer-col a:hover { color: var(--primary); padding-left: 5px; }
        .footer-bottom { border-top: 1px solid #334155; padding-top: 20px; text-align: center; color: #64748b; font-size: 0.9rem; }

        /* --- FLOATING AI WIDGET --- */
        .ai-fab { position: fixed; bottom: 30px; right: 30px; width: 60px; height: 60px; background: var(--primary); border-radius: 50%; box-shadow: 0 4px 15px rgba(14,165,233,0.4); display: flex; align-items: center; justify-content: center; font-size: 1.8rem; color: white; cursor: pointer; z-index: 2000; transition: transform 0.2s; }
        .ai-fab:hover { transform: scale(1.1); }
        
        .chat-widget { position: fixed; bottom: 100px; right: 30px; width: 350px; height: 500px; background: var(--bg-card); border-radius: 16px; box-shadow: 0 20px 50px rgba(0,0,0,0.2); z-index: 1999; display: none; flex-direction: column; overflow: hidden; border: 1px solid var(--border); }
        .chat-header { background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
        .chat-body { flex: 1; padding: 15px; overflow-y: auto; background: var(--bg-body); display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px 14px; border-radius: 12px; max-width: 80%; font-size: 0.9rem; }
        .msg-in { background: #e2e8f0; align-self: flex-start; color: #334155; }
        .msg-out { background: var(--primary); color: white; align-self: flex-end; }
        
        /* Toast */
        .toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #1e293b; color: white; padding: 12px 24px; border-radius: 30px; z-index: 3000; animation: fadeUp 0.3s; }
        @keyframes fadeUp { from { opacity: 0; transform: translate(-50%, 20px); } to { opacity: 1; transform: translate(-50%, 0); } }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 { font-size: 2.5rem; }
            .hero-btns { flex-direction: column; align-items: center; }
            .btn { width: 100%; max-width: 300px; }
            .hero-stats { gap: 30px; }
            .nav-links { display: none; }
        }
    </style>
</head>
<body>

    <!-- NAV -->
    <header>
        <div class="container nav-inner">
            <div class="logo">
                <span style="color:var(--primary)">ü©∫</span> HealthAssist AI
            </div>
            <nav class="nav-links">
                <a href="#home">Home</a>
                <a href="#checker">Diagnosis</a>
                <a href="#doctors">Doctors</a>
                <a href="#medicine">Medicine</a>
                <a href="#knowledge">Knowledge</a>
            </nav>
            <div style="display:flex; gap:10px;">
                <button class="btn" style="padding:8px 16px; font-size:0.8rem; background:transparent; border:1px solid var(--border);" onclick="toggleLang()">EN/TE</button>
                <button class="btn" style="padding:8px; width:36px; height:36px; border-radius:50%; background:transparent; border:1px solid var(--border);" onclick="toggleTheme()">üåô</button>
            </div>
        </div>
    </header>

    <!-- HERO (DASHBOARD) -->
    <section class="hero" id="home">
        <div class="container">
            <h1 data-i18n="hero_title">Your Smart Health Companion</h1>
            <p data-i18n="hero_desc">Advanced AI symptom analysis, simplified medical knowledge, and instant connectivity. Rural healthcare made accessible.</p>
            
            <div class="hero-btns">
                <a href="#checker" class="btn btn-primary" data-i18n="btn_start">Start Diagnosis</a>
                <a href="#doctors" class="btn btn-white" data-i18n="btn_book">Book Appointment</a>
                <a href="https://wa.me/919121472856" target="_blank" class="btn btn-green" data-i18n="btn_wa">WhatsApp Doctor</a>
            </div>

            <div class="hero-stats">
                <div class="stat-item"><strong>24/7</strong><span>AI Support</span></div>
                <div class="stat-item"><strong>10k+</strong><span>Users</span></div>
                <div class="stat-item"><strong>Free</strong><span>Service</span></div>
            </div>
        </div>
    </section>

    <!-- AI SYMPTOM CHECKER -->
    <section id="checker">
        <div class="container">
            <div class="section-header">
                <h2 data-i18n="checker_title">AI Symptom Analysis</h2>
                <p>Describe your issue, and our AI will provide a preliminary assessment.</p>
            </div>
            <div class="card" style="max-width: 800px; margin: 0 auto;">
                <div style="position: relative;">
                    <textarea id="symptom-input" class="form-control" rows="4" placeholder="Ex: I have a severe headache on the left side and sensitivity to light..."></textarea>
                    <button onclick="toggleVoice()" style="position: absolute; bottom: 25px; right: 10px; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--primary);">üé§</button>
                </div>
                <button class="btn btn-primary" style="width:100%" onclick="analyzeSymptoms()">Analyze Symptoms</button>
                <div id="ai-result" style="display:none; margin-top:20px; padding:20px; background:#eff6ff; border-left:4px solid var(--primary); border-radius:8px;"></div>
            </div>
        </div>
    </section>

    <!-- MEDICINE REMINDER -->
    <section id="medicine" style="background: var(--bg-card);">
        <div class="container">
            <div class="section-header">
                <h2 data-i18n="med_title">Medicine Reminders</h2>
            </div>
            <div class="card" style="max-width: 600px; margin: 0 auto 30px;">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                    <input type="text" id="med-name" class="form-control" placeholder="Medicine Name" style="margin:0;">
                    <input type="time" id="med-time" class="form-control" style="margin:0;">
                </div>
                <button class="btn btn-primary" style="width:100%" onclick="addMedicine()">Set Reminder</button>
            </div>
            <div id="med-list" class="grid-layout"></div>
        </div>
    </section>

    <!-- DOCTOR BOOKING -->
    <section id="doctors">
        <div class="container">
            <div class="section-header">
                <h2 data-i18n="doc_title">Find Doctors in AP & TS</h2>
            </div>
            <div style="text-align: center; margin-bottom: 30px;">
                <select id="city-filter" class="form-control" style="width: auto; display: inline-block;" onchange="renderDoctors()">
                    <option value="all">üìç All Cities</option>
                    <option value="Hyderabad">Hyderabad</option>
                    <option value="Vijayawada">Vijayawada</option>
                    <option value="Guntur">Guntur</option>
                    <option value="Visakhapatnam">Visakhapatnam</option>
                    <option value="Tirupati">Tirupati</option>
                </select>
            </div>
            <div id="doctors-container" class="grid-layout"></div>
        </div>
    </section>

    <!-- KNOWLEDGE & FIRST AID -->
    <section id="knowledge" style="background: var(--bg-card);">
        <div class="container">
            <div class="section-header">
                <h2 data-i18n="know_title">Health Knowledge Hub</h2>
            </div>
            <div class="grid-layout" style="grid-template-columns: 1fr 1fr;">
                <!-- Term Simplifier -->
                <div class="card">
                    <h3>üîç Medical Dictionary</h3>
                    <p style="color:var(--text-muted); font-size:0.9rem;">Understand complex medical terms.</p>
                    <input type="text" class="form-control" placeholder="Type term (e.g., Hypertension)..." onkeyup="simplifyTerm(this)">
                    <div id="term-text" style="color:var(--primary); font-weight:600;"></div>
                </div>
                <!-- First Aid -->
                <div class="card">
                    <h3>üöë Quick First Aid</h3>
                    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:15px;">
                        <button class="btn btn-white" style="padding:8px 16px; font-size:0.9rem;" onclick="alert('CPR: Push hard & fast on chest center. Call 108.')">ü´Ä CPR</button>
                        <button class="btn btn-white" style="padding:8px 16px; font-size:0.9rem;" onclick="alert('Burns: Cool water for 10 mins. No ice.')">üî• Burns</button>
                        <button class="btn btn-white" style="padding:8px 16px; font-size:0.9rem;" onclick="alert('Cuts: Apply pressure. Elevate wound.')">ü©∏ Cuts</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER SECTION -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <h4>HealthAssist AI</h4>
                    <p style="color:#94a3b8; font-size:0.9rem; line-height:1.6;">Making healthcare accessible for everyone, everywhere. AI-powered diagnostics and connectivity.</p>
                </div>
                <div class="footer-col">
                    <h4>Quick Links</h4>
                    <a href="#home">Home</a>
                    <a href="#checker">Diagnosis</a>
                    <a href="#doctors">Find Doctors</a>
                    <a href="#medicine">Medicine</a>
                </div>
                <div class="footer-col">
                    <h4>Resources</h4>
                    <a href="#knowledge">First Aid</a>
                    <a href="#" onclick="findNearestHospital()">Find Hospital</a>
                    <a href="#">Privacy Policy</a>
                </div>
                <div class="footer-col">
                    <h4>Contact</h4>
                    <a href="tel:108">üöë Emergency: 108</a>
                    <a href="mailto:support@healthassist.ai">üìß support@healthassist.ai</a>
                    <div style="margin-top:10px; font-size:1.5rem;">
                        <span style="margin-right:10px; cursor:pointer;">üê¶</span>
                        <span style="margin-right:10px; cursor:pointer;">üìò</span>
                        <span style="cursor:pointer;">üì∑</span>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                &copy; 2023 HealthAssist AI. All rights reserved.
            </div>
        </div>
    </footer>

    <!-- AI CHAT BOT WIDGET -->
    <div class="ai-fab" onclick="toggleChat()">ü§ñ</div>
    <div id="chat-widget" class="chat-widget">
        <div class="chat-header">
            <span>Health Assistant</span>
            <span style="cursor:pointer" onclick="toggleChat()">√ó</span>
        </div>
        <div id="chat-body" class="chat-body">
            <div class="msg msg-in">Hello! I am your AI assistant. How can I help you today?</div>
        </div>
        <div style="padding:10px; border-top:1px solid var(--border); display:flex; gap:10px;">
            <input type="text" id="chat-input" class="form-control" style="margin:0;" placeholder="Ask AI..." onkeypress="if(event.key==='Enter') sendChat()">
            <button class="btn btn-primary" style="padding:8px 14px; border-radius:8px;" onclick="sendChat()">‚û§</button>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast-area"></div>

    <script>
        // ==========================================
        // 1. CONFIGURATION
        // ==========================================
        const API_KEY = "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"; // PASTE YOUR OPENAI API KEY HERE
        const API_URL = "https://api.openai.com/v1/chat/completions";

        const doctorsDB = [
            { name: "Dr. Siva Ram", spec: "General Physician", city: "Guntur" },
            { name: "Apollo Hospitals", spec: "Multi-Specialty", city: "Hyderabad" },
            { name: "KIMS", spec: "Emergency", city: "Visakhapatnam" },
            { name: "Dr. Priya", spec: "Dermatologist", city: "Vijayawada" },
            { name: "Ruia Hospital", spec: "General", city: "Tirupati" }
        ];

        const medicalTerms = {
            "hypertension": "High Blood Pressure",
            "hypotension": "Low Blood Pressure",
            "diabetes": "High Blood Sugar",
            "pneumonia": "Lung Infection",
            "benign": "Harmless / Non-cancerous",
            "edema": "Swelling due to fluid"
        };

        const translations = {
            en: {
                hero_title: "Your Smart Health Companion",
                hero_desc: "Advanced AI symptom analysis, simplified medical knowledge, and instant connectivity. Rural healthcare made accessible.",
                btn_start: "Start Diagnosis",
                btn_book: "Book Appointment",
                btn_wa: "WhatsApp Doctor",
                checker_title: "AI Symptom Analysis",
                med_title: "Medicine Reminders",
                doc_title: "Find Doctors in AP & TS",
                know_title: "Health Knowledge Hub"
            },
            te: {
                hero_title: "‡∞Æ‡±Ä ‡∞∏‡±ç‡∞Æ‡∞æ‡∞∞‡±ç‡∞ü‡±ç ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞°‡±Å",
                hero_desc: "‡∞Ö‡∞ß‡±Å‡∞®‡∞æ‡∞§‡∞® AI ‡∞≤‡∞ï‡±ç‡∞∑‡∞£ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£, ‡∞µ‡±à‡∞¶‡±ç‡∞Ø ‡∞™‡∞∞‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞®‡∞Ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞§‡∞ï‡±ç‡∞∑‡∞£ ‡∞ï‡∞®‡±Ü‡∞ï‡±ç‡∞ü‡∞ø‡∞µ‡∞ø‡∞ü‡±Ä. ‡∞ó‡±ç‡∞∞‡∞æ‡∞Æ‡±Ä‡∞£ ‡∞µ‡±à‡∞¶‡±ç‡∞Ø‡∞Ç ‡∞á‡∞™‡±ç‡∞™‡±Å‡∞°‡±Å ‡∞Ö‡∞Ç‡∞¶‡∞∞‡∞ø‡∞ï‡±Ä ‡∞Ö‡∞Ç‡∞¶‡±Å‡∞¨‡∞æ‡∞ü‡±Å‡∞≤‡±ã.",
                btn_start: "‡∞®‡∞ø‡∞∞‡±ç‡∞ß‡∞æ‡∞∞‡∞£ ‡∞™‡±ç‡∞∞‡∞æ‡∞∞‡∞Ç‡∞≠‡∞ø‡∞Ç‡∞ö‡∞Ç‡∞°‡∞ø",
                btn_book: "‡∞Ö‡∞™‡∞æ‡∞Ø‡∞ø‡∞Ç‡∞ü‡±ç‚Äå‡∞Æ‡±Ü‡∞Ç‡∞ü‡±ç ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞Ç‡∞°‡∞ø",
                btn_wa: "‡∞µ‡∞æ‡∞ü‡±ç‡∞∏‡∞æ‡∞™‡±ç ‡∞°‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç",
                checker_title: "AI ‡∞≤‡∞ï‡±ç‡∞∑‡∞£ ‡∞µ‡∞ø‡∞∂‡±ç‡∞≤‡±á‡∞∑‡∞£",
                med_title: "‡∞Æ‡∞Ç‡∞¶‡±Å‡∞≤ ‡∞∞‡∞ø‡∞Æ‡±à‡∞Ç‡∞°‡∞∞‡±ç‡∞≤‡±Å",
                doc_title: "AP & TS ‡∞≤‡±ã ‡∞°‡∞æ‡∞ï‡±ç‡∞ü‡∞∞‡±ç‡∞≤‡∞®‡±Å ‡∞ï‡∞®‡±Å‡∞ó‡±ä‡∞®‡∞Ç‡∞°‡∞ø",
                know_title: "‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø ‡∞µ‡∞ø‡∞ú‡±ç‡∞û‡∞æ‡∞® ‡∞ï‡±á‡∞Ç‡∞¶‡±ç‡∞∞‡∞Ç"
            }
        };

        let currentLang = 'en';

        // ==========================================
        // 2. CORE FUNCTIONS
        // ==========================================
        function toggleTheme() {
            const html = document.documentElement;
            html.setAttribute('data-theme', html.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
        }

        function toggleLang() {
            currentLang = currentLang === 'en' ? 'te' : 'en';
            const t = translations[currentLang];
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) el.innerText = t[key];
            });
            showToast(currentLang === 'en' ? "Language: English" : "‡∞≠‡∞æ‡∞∑: ‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å");
        }

        function showToast(msg) {
            const area = document.getElementById('toast-area');
            const t = document.createElement('div');
            t.className = 'toast'; t.innerText = msg;
            area.appendChild(t);
            setTimeout(() => t.remove(), 3000);
        }

        function findNearestHospital() {
            if (!navigator.geolocation) return alert("Geolocation not supported.");
            navigator.geolocation.getCurrentPosition(pos => {
                window.open(`https://www.google.com/maps/search/hospitals/@${pos.coords.latitude},${pos.coords.longitude},15z`);
            });
        }

        // ==========================================
        // 3. AI LOGIC
        // ==========================================
        async function callAI(prompt) {
            if (!API_KEY) {
                return new Promise(r => setTimeout(() => r("This is a simulation. Based on your input, please rest and drink fluids. Consult a doctor if symptoms persist."), 1000));
            }
            try {
                const res = await fetch(API_URL, {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json', 'Authorization': `Bearer ${API_KEY}`},
                    body: JSON.stringify({ model: "gpt-3.5-turbo", messages: [{role: "user", content: "Diagnosis for: " + prompt}] })
                });
                const data = await res.json();
                return data.choices[0].message.content;
            } catch(e) { return "Connection Error."; }
        }

        async function analyzeSymptoms() {
            const val = document.getElementById('symptom-input').value;
            if(!val) return showToast("Enter symptoms first");
            const resBox = document.getElementById('ai-result');
            resBox.style.display = 'block';
            resBox.innerText = "Analyzing...";
            const diagnosis = await callAI(val);
            resBox.innerText = diagnosis;
        }

        function toggleVoice() {
            if(!('webkitSpeechRecognition' in window)) return alert("Voice not supported");
            const rec = new webkitSpeechRecognition();
            rec.lang = currentLang === 'te' ? 'te-IN' : 'en-US';
            showToast("Listening...");
            rec.start();
            rec.onresult = (e) => {
                document.getElementById('symptom-input').value = e.results[0][0].transcript;
                analyzeSymptoms();
            };
        }

        // ==========================================
        // 4. CHAT BOT
        // ==========================================
        function toggleChat() {
            const w = document.getElementById('chat-widget');
            w.style.display = w.style.display === 'flex' ? 'none' : 'flex';
        }

        async function sendChat() {
            const inp = document.getElementById('chat-input');
            const txt = inp.value;
            if(!txt) return;
            const body = document.getElementById('chat-body');
            body.innerHTML += `<div class="msg msg-out">${txt}</div>`;
            inp.value = '';
            body.innerHTML += `<div class="msg msg-in">...</div>`;
            const reply = await callAI(txt);
            body.lastElementChild.innerText = reply;
            body.scrollTop = body.scrollHeight;
        }

        // ==========================================
        // 5. MEDICINE & DOCTORS
        // ==========================================
        let meds = JSON.parse(localStorage.getItem('meds')) || [];

        function addMedicine() {
            const name = document.getElementById('med-name').value;
            const time = document.getElementById('med-time').value;
            if(name && time) {
                meds.push({name, time});
                localStorage.setItem('meds', JSON.stringify(meds));
                renderMeds();
                showToast("Reminder Set!");
            }
        }

        function renderMeds() {
            const list = document.getElementById('med-list');
            list.innerHTML = '';
            meds.forEach((m, i) => {
                list.innerHTML += `
                <div class="card" style="padding:15px; display:flex; justify-content:space-between;">
                    <div><strong>${m.name}</strong><br><small>‚è∞ ${m.time}</small></div>
                    <button class="btn btn-white" style="padding:5px 10px;" onclick="meds.splice(${i},1);localStorage.setItem('meds',JSON.stringify(meds));renderMeds()">√ó</button>
                </div>`;
            });
        }
        renderMeds();

        function renderDoctors() {
            const filter = document.getElementById('city-filter').value;
            const container = document.getElementById('doctors-container');
            container.innerHTML = '';
            const filtered = filter === 'all' ? doctorsDB : doctorsDB.filter(d => d.city === filter);
            filtered.forEach(d => {
                container.innerHTML += `
                <div class="card" style="text-align:center;">
                    <div style="font-size:2rem; margin-bottom:10px;">üë®‚Äç‚öïÔ∏è</div>
                    <h4>${d.name}</h4>
                    <p style="color:var(--text-muted)">${d.spec}</p>
                    <p style="font-size:0.8rem; margin:10px 0;">üìç ${d.city}</p>
                    <button class="btn btn-primary" onclick="alert('Booking confirmed with ${d.name}')">Book Now</button>
                </div>`;
            });
        }
        renderDoctors();

        // ==========================================
        // 6. KNOWLEDGE
        // ==========================================
        function simplifyTerm(input) {
            const val = input.value.toLowerCase();
            const res = document.getElementById('term-text');
            const found = Object.keys(medicalTerms).find(k => k.includes(val));
            res.innerText = found ? `${found}: ${medicalTerms[found]}` : "";
        }
    </script>
</body>
</html>

